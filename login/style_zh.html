<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>microblog</title>
    <link rel="stylesheet" href="http://twitter.github.com/bootstrap/assets/css/bootstrap.css">
    <link rel="stylesheet" href="http://fortawesome.github.com/Font-Awesome/assets/css/font-awesome.css">
    <link rel="stylesheet" href="login.css">
  </head>
  <body>
    <div class="container"><a id="toregister" class="hiddenanchor"></a><a id="tologin" class="hiddenanchor"></a>
      <div id="wrapper"><a data-toggle="tooltip" data-placement="right" title="顫抖吧！人類……" href="/" tabindex="-1" class="logo"><img src="logo.png" alt="logo"></a>
        <div id="login" class="animate form">
          <h1>Mini Blog</h1>
          <form action="" autocomplete="on" novalidate>
                    <p class="control-group">
                      <label for="username">用户名或邮箱</label><i class="icon-user"></i>
                      <input id="username" name="username" type="text" required placeholder="用户名或邮箱" data-validation-required-message="请填写用户名！"><span class="help-block"></span>
                    </p>
                    <p class="control-group">
                      <label for="password">密码</label><i class="icon-key"></i>
                      <input id="password" name="password" type="password" required placeholder="密码" data-validation-required-message="请填写密码！"><span class="help-block"></span>
                    </p>
            <p class="keeplogin checkbox">
              <input id="loginkeeping" type="checkbox" name="loginkeeping" value="loginkeeping">
              <label for="loginkeeping">记住我</label>
            </p>
                    <p class="submit button">
                      <input type="submit" value="登录" class="btn btn-primary">
                    </p><a href="/(forgot_password)" class="forgot_pw">忘记密码</a>
                    <p class="change_link">木有账号？<a href="#toregister">立即注册</a></p>
          </form>
        </div>
        <div id="register" class="animate form">
          <h1>Mini Blog</h1>
          <form action="" autocomplete="on" novalidate>
                    <p class="control-group">
                      <label for="usernamesignup">用户名</label><i class="icon-user"></i>
                      <input id="usernamesignup" name="usernamesignup" type="text" required placeholder="用户名" data-validation-required-message="请填写用户名！"><span class="help-block"></span>
                    </p>
                    <p class="control-group">
                      <label for="emailsignup">邮箱地址</label><i class="icon-envelope"></i>
                      <input id="emailsignup" name="emailsignup" type="email" required placeholder="邮箱" data-validation-required-message="请填写邮箱！"><span class="help-block"></span>
                    </p>
            <p class="control-group">
              <label for="passwordsignup">密码</label><i class="icon-key"></i>
              <input id="passwordsignup" name="passwordsignup" required type="password" placeholder="密码" data-validation-required-message="请填写密码！" maxlength="12" data-validation-callback-callback="regexpPw"><span class="help-block"></span>
            </p>
            <p class="control-group">
              <label for="passwordsignup_confirm">确认密码</label><i class="icon-key"></i>
              <input id="passwordsignup_confirm" name="passwordsignup_confirm" type="password" required placeholder="确认密码" data-validation-required-message="请填写密码！" data-validation-match-match="passwordsignup" data-validation-match-message="密码不匹配"><span class="help-block"></span>
            </p>
                    <p class="submit button">
                      <input type="submit" value="注册" class="btn btn-primary">
                    </p>
                    <p class="change_link">已有账号？<a href="#tologin">立即登录</a></p>
          </form>
        </div>
      </div>
    </div>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
    <script src="http://twitter.github.com/bootstrap/assets/js/bootstrap.min.js"></script>
    <script src="jquery.backstretch.min.js"></script>
    <script src="jqBootstrapValidation.js"></script>
    <script>
      var regexpPw =  function($el, val, callback){
          callback({
          value: val,
          valid: /^[a-zA-Z0-9_]{6,}$/.test(val) && /[a-z]/i.test(val) && /\d/.test(val),
              message: "密码不能小于6位且必须包含一个数字或字母"
          });
      }
      $.backstretch([
      "bg1.png",
      "bg2.png"
      ], {duration: 3000, fade: 750});
      $(".logo").tooltip();
      $("input,select,textarea").not("[type=submit]").not("[name=passwordsignup_confirm]").jqBootstrapValidation({
          validationMessage:{
              email:"这不是Email"    //仅修改email，方便jade
          }
      })
      $("[name=passwordsignup_confirm]").jqBootstrapValidation({validationHandlers:["blur"]})
      $("#register").submit(function(){
          $("[name=passwordsignup_confirm]").val() == "" &&  $("[name=passwordsignup_confirm]").parent(".control-group").addClass("error").find(".help-block").html('<ul role="alert"><li>请重复填写密码</li></ul>')
      })
      $("[href=#toregister]").click(function(){
      $("#usernamesignup").focus();
          $("#register input").attr("tabindex",1)
      });
      $("[href=#tologin]").click(function(){
          $("#username").focus();
          $("#register input").removeAttr("tabindex")
      });
      $(function(){
          if (location.hash == "#toregister") {
              $("#usernamesignup").focus();
              $("#register input").attr("tabindex",1);
          }
          else {
              $("#username").focus();
          }
      });
    </script>
  </body>
</html>